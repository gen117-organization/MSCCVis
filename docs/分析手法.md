# 分析手法

## クローンの分類
- 検出範囲: Inter-service / Within-service
- コード種別: Production / Testing / Mixed
- 上記の直積により6分類を用いる。

## クローン率の算出
- クローン片の行範囲をファイルごとにフラグ化し、該当行数の比率を算出する。
- 集計単位はクローンセット（clone_id の集合）。
- コメント、空行、生成コードは除外しない。

## 修正の有無（変更履歴）
- 2コミット間の `git diff` から、挿入・削除・修正行を抽出する。
- クローン片の行対応を追跡し、
  - `modified`: 行対応があり、変更が検出された場合
  - `added`: 新規に追加された片として検出された場合
  を記録する。
- リネームは新規ファイル扱いとし、修正対象に含めない。

## 共修正（コモディフィケーション）
- クローンセット内の複数片が同一コミットで `modified` になった場合に共修正とみなす。
- Mixed Cloneset は独立カテゴリとして扱い、Production/Testing への按分は行わない。
